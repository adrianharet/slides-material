%% magick convert -density 1200 test.pdf test.png
\documentclass[preview, varwidth=10cm, border={0pt 5pt 0pt 1pt}]{standalone} % border options are {left bottom right top}

\input{input/packages.tex}
\input{input/colors.tex}
\input{input/macros.tex}

\begin{document}
    % \begin{table}
    %     \begin{tabular}{rl}
    %         players & \(N = \{1, \dots , n\}\) \\
    %         strategy of player \(i\) & \(s_i\) \\
    %         profile of strategies & \(\bm{s} = (s_1, \dots , s_n) \) \\
    %         utility of player \(i\) with strategy profile \(\bm{s} \) & \(u_i(\bm{s}) \in \mathbb{R}\) \\
    %         strategy profile \(\bm{s} \) without \(s_i\) & \(\bm{s}_{-i} = (s_1, \dots , s_{i-1}, s_{i+1}, \dots , s_n)\) \\
    %         \(\bm{s} \), alternatively & \(\bm{s} = (s_i, \bm{s}_{-i} ) \)
    %     \end{tabular}
    % \end{table}

    % \(u_1(\text{Keep}, \text{Keep}) = 1\), \(u_2(\text{Invest}, \text{Keep}) = 4\), \dots 
    % Player \(i\)'s \emph{best response} to the other players' strategies 
    % \(\bm{s}_{-i} = (s_1, \dots, s_{i-1}, s_{i+1}, \dots, s_n)\)
    % is a strategy \(s^{*}_i\) such that \(u_i(s^{*}_i, \bm{s}_{-i}) \geq u_i(s_i, \bm{s}_{-i})\), 
    % for any strategy \(s_i\) of player \(i\).
    
    % A strategy profile \(\bm{s}^{*} = (s_1^{*}, \dots, s_n^{*})\) is a 
    % \emph{pure Nash equilibrium} if \(s_i^{*}\) is a best response to \(\bm{s}^*_{-i}\),
    % for every player \(i\).\\

    % In other words, \(\bm{s}^*\) is a pure Nash equilibrium if there is no player \(i\) and strategy \(s'_i\)
    % such that \(u_i(s'_i, \bm{s}^*_{-i}) > u_i(s^*_i, \bm{s}^*_{-i})\).
    % 
    % A strategy profile \(\bm{s}\) \emph{Pareto dominates} strategy profile \(\bm{s}'\) if:
    % \begin{itemize}
    %     \item[(i)] \(u_i(\bm{s}) \geq u_i(\bm{s}')\), for every agent \(i\), and 
    %     \item[(ii)] there exists an agent \(j\) such that \(u_j(\bm{s}) > u_j(\bm{s}')\). 
    % \end{itemize}
    % 
    % A strategy profile \(\bm{s}\) is \emph{Pareto optimal} if 
    % there is no (other) strategy profile \(\bm{s}'\) that Pareto dominates \(\bm{s}\).

    % \(u_1{\big(\text{1-1}, (\text{yes}, \text{no}, \text{yes})\big)} = 0\)
    % \(2+ 2 \delta + 2\delta^2 + \dots\)
    % \begin{align*}
    %     2+2\delta+ 2\delta^2 + \dots & = 2(1+\delta + \delta^2 + \dots)\\ 
    %                               & = 2\cdot \frac{1}{1-\delta}
    % \end{align*}

    % \(2\cdot (\nicefrac{1}{1-\delta})\)

    % My sweet Mil I love you very much.
    
    % \(2, 2\delta, \dots, 2\delta^{k-1}, 3\delta^k, \delta^{k+1}, \delta^{k+2}, \dots\)
    % \(2\cdot\left(\nicefrac{1}{1-\delta}\right)\)
    % \(2 + \frac{1}{1-\delta} \leq 2\cdot \frac{1}{1-\delta},\)
    % \(\delta \geq \frac{1}{2}\)
    % \begin{align*}
    %     2 + 2\delta + \dots + 2\delta^{k-1} + 3\delta^k + \delta^{k+1} + \dots &\leq 2 + 2\delta + \dots + 2\delta^{k-1} + 2\delta^k + 2\delta^{k+1} + \dots & \text{iff} \\
    %     3\delta^k + \delta^{k+1} + \dots &\leq 2\delta^k + 2\delta^{k+1} + \dots & \text{iff}\\
    %     3 + \delta + \delta^2 + ... &\leq 2 + 2\delta + 2\delta^2 + \dots & \text{iff} \\
    %     \delta & \geq \nicefrac{1}{2}. &
    % \end{align*}

    
    
    
    % A \emph{mixed strategy} for player \(i\) is a probability ditribution over actions,
    % written \(s_i = (p_1, \dots , p_j, \dots )\), where \(p_i\) is the probability 
    % with which player \(i\) plays action \(j\).\\

    % Note that the pure strategies we've been dealing with so far are special cases of mixed 
    % strategies, in which one action is played with probability \(1\).

    % \(\text{state}~\ell~(p_\ell)\)
    % \(u(\text{action }k, \text{state }\ell)\)

    % Assume Player 1 has strategy \(s_1 = (0.9, 0.1)\). What should Player 2 do?
    % \begin{flalign*}
    %     \qquad\EXP[\text{Heads}] & = (-1) \cdot 0.9 + 1 \cdot 0.1 &\\ 
    %                        & = -0.8.&\\
    %     \EXP[\text{Tails}] & = 1 \cdot 0.9 + (-1) \cdot 0.1 &\\ 
    %                        & = 0.8.&
    % \end{flalign*}
    % If Player 2 always plays Heads, they get an average payoff of \(-0.8\). 
    % If they always play Tails, they get an average payoff of \(0.8\).\\ 

    % Would it make sense for Player 2 to mix between Heads and Tails, say with \(s_2' = (0.3, 0.7)\)?
    % \begin{flalign*}
    %     \qquad\EXP[s'_2] & = (-0.8) \cdot 0.3 + 0.8 \cdot 0.7 &\\ 
    %                        & = 0.32&\\
    %                        & < 0.8. &
    % \end{flalign*}    

    % No mixing gives better results than always going for Tails, so Player 2 wants to play \(s_2 = (0, 1)\).\\

    % Is \(\bm{s} = (s_1, s_2)\) a Nash equilibrium?\\

    % No! If Player 2 plays \(s_2 = (0, 1)\), Player \(1\) wants to switch to \(s'_1 = (0, 1)\).



    % In general, if Player 1 plays a mixed strategy that makes Player 2 prefer one action over another,
    % Player 2 will just start playing that action all the time.\\

    % Player 2 sees the opportunity and goes for it!\\

    % But that makes Player 1 want to change \emph{their} strategy.\\

    % So this cannot be a Nash equilibrium.\\

    % The only way to avoid this is for Player 1 to play a strategy \(s^*_1 = (p, 1-p)\) that makes
    % Player 2 indifferent between their actions, which means that:
    % \begin{flalign*}
    %     \qquad\EXP[\text{Heads}] = \EXP[\text{Tails}] & \text{ iff } (-1) \cdot p + 1 \cdot (1-p) = 1 \cdot p + (-1) \cdot (1-p)&\\ 
    %                        & \text{ iff } p = \nicefrac{1}{2}.&
    % \end{flalign*}
    % So Player 1 wants to play \(s^*_1 = (\nicefrac{1}{2}, \nicefrac{1}{2})\).\\

    % Similarly, Player 2 wants to play \(s^*_2 = (\nicefrac{1}{2}, \nicefrac{1}{2})\).\\

    % This is the mixed Nash equilibrium.

    % \(\bm{s}^* = \Big( (\nicefrac{1}{2}, \nicefrac{1}{2}), (\nicefrac{1}{2}, \nicefrac{1}{2})\Big)\)

    % Assume that at some time \(t\) there are \(c\) cooperators and \(d\) defectors.\\

    % The expected payoff of a cooperator is:
    % \begin{flalign*}
    % \quad\EXP\big[\text{Cooperate}\big] & = u\big(\text{Cooperate}, \text{Cooperate}\big) \cdot {\Pr}{\left[ \text{match w/ cooperator} \right]} + &\\
    %                                    &~~~~~u\big(\text{Cooperate}, \text{Defect}\big) \cdot  {\Pr}{\left[ \text{match w/ defector} \right]}&\\ 
    %                                    & = 2 \cdot \frac{c-1}{c+d} + 0 \cdot \frac{d}{c+d}.&
    % \end{flalign*}

    % The expected payoff of a defector is:
    % \begin{flalign*}
    %     \quad\EXP\big[\text{Defect}\big] & = u\big(\text{Defect}, \text{Cooperate}\big) \cdot {\Pr}{\left[ \text{match w/ cooperator} \right]} +& \\
    %                                      & ~~~~~u\big(\text{Defect}, \text{Defect}\big) \cdot {\Pr}{\left[ \text{match w/ defector} \right]}&\\ 
    %                            & = 3 \cdot \frac{c}{c+d} + 1 \cdot \frac{d-1}{c+d}.
    % \end{flalign*}
    % Note that \(\EXP[\text{Defect}] > \EXP[\text{Cooperate}]\).\\

    % Defectors grow faster than cooperators.\\ 

    % Eventually, cooperators die out.

    % Assume the proportions of Bs is \(\epsilon \), and the proportion of As is \(1-\epsilon \).\\

    % The expected payoff of A is greater than that of B if:
    % \[
    %     a(1- \epsilon ) + b \epsilon > c(1-\epsilon ) + d \epsilon,
    % \]
    % which, if we ignore the \(\epsilon \) terms, is equivalent to:
    % \[
    %     a > c.
    % \]
    % If, however, it happens that \(a=c\), then we need:
    % \[
    %     b > d.
    % \]
    % A strategy is evolutionarily stable if \(a>c\), or \(a=c\) and \(b>d\).

    % We write \(u(s_i, s_j)\) for the payoff of strategy \(s_i\) against \(s_j\).\\

    % Strategy \(s_i\) is an \emph{evolutionarily stable strategy (ESS)} if:
    % \begin{description}
    %     \item[(i)] \(u(s_i, s_i) > u(s_j, s_i)\), for all strategies \(s_j \neq s_i\), or
    %     \item[(ii)] \(u(s_i, s_i) = u(s_j, s_i)\) and \(u(s_i, s_j) > u(s_j, s_j)\), for all strategies \(s_j \neq s_i\).
    % \end{description}

    % \(b-c, b-c\)
    % \((b-c)\mu, (b-c)\mu\)
    % \(b, -c\)
    % \(-c, b\)
    % \(0, 0\)

    % TFT is an ESS if the occasional ALLD, thrown in a world where TFT is dominant,
    % does worse against a TFT than a TFT against itself.\\

    % This happens if:
    % \begin{flalign*}
    %     b < (b-c)\mu &\text{  iff  } \mu> \frac{b}{b-c} &\\
    %                  & \text{  iff  } \frac{1}{1-\delta } > \frac{b}{b-c} &\\
    %                  & \text{  iff  } \frac{1}{1-\delta } > \frac{b}{b-c} &\\
    %                  & \text{  iff  } b-c > b(1-\delta ) &\\
    %                  & \text{  iff  } \delta  > \frac{c}{b}. &
    % \end{flalign*}

    % ALLD is an ESS if a population of ALLDs cannot be invaded by TFTs.\\

    % This happens if a TFT against an ALLD does worse than an ALLD against
    % another ALLD, which is equivalent to:
    % \[
    %     -c < 0.
    % \]

    \(\mu = \frac{1}{1-\delta}\)
\end{document}